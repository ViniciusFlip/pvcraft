RewriteEngine On

# =====================================================
# 1Ô∏è‚É£ Redirecionar dom√≠nio antigo pvcraft.site ‚Üí pvcraft.net
# =====================================================
RewriteCond %{HTTP_HOST} ^(www\.)?pvcraft\.site$ [NC]
RewriteRule ^(.*)$ https://pvcraft.net/$1 [R=301,L]

# =====================================================
# 2Ô∏è‚É£ Redirecionar antigos contents.html ‚Üí novas URLs limpas
# Exemplo: /addons/contents.html?id=returntojw ‚Üí /addons/?id=returntojw
# =====================================================
RewriteCond %{THE_REQUEST} \s/(addons|maps|textures)/contents\.html\?id=([^&\s]+) [NC]
RewriteRule ^(addons|maps|textures)/contents\.html$ https://pvcraft.net/%1/?id=%2 [R=301,L]

# =====================================================
# 3Ô∏è‚É£ Definir arquivos padr√£o
# =====================================================
DirectoryIndex index.php index.html

# =====================================================
# 4Ô∏è‚É£ Remover index.php e index.html da URL
# =====================================================
RewriteCond %{THE_REQUEST} \s/+(.*/)?index\.(php|html)([?\s]) [NC]
RewriteRule ^(.*/)?index\.(php|html)$ /%1 [R=301,L]

# =====================================================
# 5Ô∏è‚É£ Reescrever conte√∫dos com ?id= para index.php da pasta
# =====================================================
RewriteCond %{QUERY_STRING} (^|&)id= [NC]
RewriteRule ^(addons|maps|textures)/?$ $1/index.php [L]

# =====================================================
# 6Ô∏è‚É£ Se for s√≥ a pasta (sem par√¢metros), usar index.html
# =====================================================
RewriteRule ^addons/?$ addons/index.html [L]
RewriteRule ^maps/?$ maps/index.html [L]
RewriteRule ^textures/?$ textures/index.html [L]

# =====================================================
# 7Ô∏è‚É£ Regras espec√≠ficas para /blog
# =====================================================

# üëâ Primeiro: se tiver par√¢metro id= ‚Üí blog/index.php
RewriteCond %{QUERY_STRING} (^|&)id= [NC]
RewriteRule ^blog/?$ blog/index.php [L]

# üëâ Depois: se for s√≥ /blog ou /blog/ ‚Üí blog/index.html
RewriteRule ^blog/?$ blog/index.html [L]

# =====================================================
# 8Ô∏è‚É£ Redirecionar URLs inexistentes ‚Üí page-not-found
# =====================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/(error|page-not-found)/ [NC]
RewriteRule ^(.+)$ /page-not-found/index.html [L,R=302]

# =====================================================
# 9Ô∏è‚É£ Reescrita gen√©rica para index.php principal
# =====================================================
RewriteCond %{REQUEST_URI} !^/index\.php$ [NC]
RewriteCond %{REQUEST_URI} !^/blog [NC]
RewriteCond %{REQUEST_URI} !^/(addons|maps|textures) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot|webp)$ [NC]
RewriteRule ^(.*)$ index.php [L]
